<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="LIKE E-Gift Cards - Buy Gift Vouchers online for Birthdays, Weddings & More from popular brands. Low Prices, Best Deals, Great Offers." />
  <meta name="keywords" content="gift cards, e-gift cards, vouchers, online gifts, LIKE" />
  <title>LIKE ‚Äî Gift Card Creator & Redemption</title>
  <style>
    :root{--bg:#0f2540;--accent:#ff8a00;--card:#ffffff;--muted:#98a0b3}
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,system-ui,Arial}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#07122b 0%,#0f2540 100%);color:#fff;padding:32px}
    .container{width:100%;max-width:1200px;margin:0 auto}
    
    .tabs{display:flex;gap:8px;margin-bottom:24px;background:rgba(255,255,255,0.02);padding:8px;border-radius:12px}
    .tab{padding:12px 24px;border-radius:8px;border:0;background:transparent;color:#fff;cursor:pointer;font-weight:600;transition:all 0.3s}
    .tab:hover{background:rgba(255,255,255,0.05)}
    .tab.active{background:var(--accent);color:#081222}
    
    .tab-content{display:none}
    .tab-content.active{display:block}
    
    .app{width:100%;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));border-radius:16px;padding:28px;display:grid;grid-template-columns:1fr 420px;gap:24px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    
    .redeem-section{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    
    header{grid-column:1/-1;display:flex;align-items:center;gap:16px;margin-bottom:16px}
    .logo{width:64px;height:64px;border-radius:50%;overflow:hidden;flex:0 0 64px;background:#fff;display:flex;align-items:center;justify-content:center}
    .logo img{width:100%;height:100%;object-fit:cover}
    h1{font-size:20px;margin:0}
    h2{font-size:24px;margin:0 0 20px 0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{padding:18px;background:rgba(255,255,255,0.02);border-radius:12px}
    label{display:block;font-size:13px;color:var(--muted);margin-top:12px}
    input[type=text],input[type=email],input[type=number],textarea,select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.05);color:#fff;margin-top:6px;font-size:14px}
    select{background:#ff8a00;color:#000}
    select option{background:#ff8a00;color:#000}
    textarea{min-height:90px;resize:vertical}
    .row{display:flex;gap:12px}
    .row > *{flex:1}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#081222;font-weight:600;cursor:pointer;margin-top:14px;transition:transform 0.2s,opacity 0.2s}
    .btn:hover{transform:translateY(-2px);opacity:0.9}
    .btn:active{transform:translateY(0)}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff}
    .btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
    .btn.full{width:100%}
    
    .preview{padding:18px;background:linear-gradient(180deg,#071a33, #08314f);border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:12px}

    .card-mock{width:360px;height:200px;border-radius:12px;background:linear-gradient(90deg,#0b355b,#093b6d);position:relative;padding:18px;color:#fff;box-shadow:0 8px 30px rgba(2,6,23,0.6);transition:transform 0.3s}
    .card-mock:hover{transform:scale(1.02)}
    .card-top{display:flex;align-items:center;justify-content:space-between}
    .card-brand{display:flex;align-items:center;gap:10px}
    .card-brand img{width:56px;height:56px;border-radius:50%;background:#fff;padding:3px}
    .card-value{font-size:22px;font-weight:700}
    .card-code{position:absolute;left:18px;bottom:18px;font-family:monospace;background:rgba(255,255,255,0.08);padding:6px 10px;border-radius:6px;font-size:13px}
    .muted{color:var(--muted);font-size:13px}

    .small{font-size:13px}
    .success-msg{background:rgba(0,200,83,0.1);border:1px solid rgba(0,200,83,0.3);color:#00c853;padding:8px 12px;border-radius:8px;margin-top:8px;font-size:13px;display:none}
    .success-msg.show{display:block;animation:slideIn 0.3s}
    .error-msg{background:rgba(255,59,48,0.1);border:1px solid rgba(255,59,48,0.3);color:#ff3b30;padding:8px 12px;border-radius:8px;margin-top:8px;font-size:13px;display:none}
    .error-msg.show{display:block;animation:slideIn 0.3s}
    @keyframes slideIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
    
    .info-box{background:rgba(255,138,0,0.1);border:1px solid rgba(255,138,0,0.3);padding:16px;border-radius:8px;margin:16px 0}
    .info-box h3{margin:0 0 8px 0;font-size:16px;color:var(--accent)}
    
    .payment-details{background:rgba(255,255,255,0.02);padding:16px;border-radius:8px;margin-top:12px;display:none}
    .payment-details.show{display:block}
    
    .redeem-result{background:rgba(255,255,255,0.02);padding:20px;border-radius:12px;margin-top:16px;display:none}
    .redeem-result.show{display:block}
    
    /* UPI Payment Styles */
    .payment-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center}
    .payment-modal.show{display:flex}
    .payment-content{background:linear-gradient(180deg,#0f2540,#071a33);border-radius:16px;padding:32px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto;position:relative}
    .close-modal{position:absolute;top:16px;right:16px;background:transparent;border:0;color:#fff;font-size:28px;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background 0.2s}
    .close-modal:hover{background:rgba(255,255,255,0.1)}
    
    .upi-options{display:grid;gap:12px;margin-top:16px}
    .upi-btn{display:flex;align-items:center;gap:12px;padding:16px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;cursor:pointer;transition:all 0.3s;text-align:left}
    .upi-btn:hover{background:rgba(255,255,255,0.08);border-color:var(--accent);transform:translateY(-2px)}
    .upi-btn img{width:48px;height:48px;border-radius:8px}
    .upi-btn-content h4{margin:0 0 4px 0;font-size:16px;color:#fff}
    .upi-btn-content p{margin:0;font-size:12px;color:var(--muted)}
    
    .qr-section{text-align:center;padding:20px;background:rgba(255,255,255,0.03);border-radius:12px;margin-top:16px}
    .qr-code{width:200px;height:200px;background:#fff;margin:16px auto;border-radius:12px;display:flex;align-items:center;justify-content:center;padding:12px}
    .qr-code img{width:100%;height:100%}
    .upi-id{background:rgba(255,255,255,0.08);padding:12px;border-radius:8px;margin:12px 0;font-family:monospace;font-size:14px;word-break:break-all}
    
    .payment-timer{text-align:center;margin:16px 0;font-size:18px;font-weight:600;color:var(--accent)}
    
    .payment-instructions{background:rgba(255,138,0,0.1);border:1px solid rgba(255,138,0,0.3);padding:12px;border-radius:8px;margin-top:12px}
    .payment-instructions ol{margin:8px 0;padding-left:20px}
    .payment-instructions li{margin:6px 0;font-size:13px}
    
    footer{text-align:center;color:var(--muted);font-size:13px;margin-top:20px}

    @media (max-width:920px){
      .app{grid-template-columns:1fr;max-width:720px}
      .preview{order:2}
      .tabs{flex-wrap:wrap}
      .payment-content{padding:24px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="tabs">
      <button class="tab active" onclick="switchTab('create')">Create Gift Card</button>
      <button class="tab" onclick="switchTab('redeem')">Redeem Gift Card</button>
    </div>

    <!-- CREATE GIFT CARD TAB -->
    <div id="createTab" class="tab-content active">
      <div class="app">
        <header>
          <div class="logo"><img src="https://turquoise-reasonable-penguin-388.mypinata.cloud/ipfs/bafkreiconcyyp3447jlcrmsmil6w3punwvyvoxqkzqh76uq22u5ms34amq" alt="LIKE logo" /></div>
          <div>
            <h1>LIKE‚ù§Ô∏è E-Gift Cards</h1>
            <p class="lead">Buy Gift Vouchers online for Birthdays, Weddings & More from popular brands. Low Prices, Best Deals, Great Offers, Huge Selection.</p>
          </div>
        </header>

        <section class="controls">
          <label>Recipient name</label>
          <input id="recipient" type="text" placeholder="Recipient name (optional)" />

          <div class="row">
            <div>
              <label>Recipient Email</label>
              <input id="recipientEmail" type="email" placeholder="recipient@example.com (optional)" />
            </div>
            <div>
              <label>Your Email *</label>
              <input id="senderEmail" type="email" placeholder="your@example.com" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label>Amount</label>
              <input id="amount" type="number" min="1" value="50" />
            </div>
            <div>
              <label>Currency</label>
              <select id="currency">
                <option value="Ô∑º ">SAR Ô∑º</option>
                <option value="$ ">USD $</option>
                <option value="‚Ç¨ ">EUR ‚Ç¨</option>
                <option value="ÿØ.ÿ• ">AED ÿØ.ÿ•</option>
                <option value="‚Çπ " selected>INR ‚Çπ</option>
              </select>
            </div>
          </div>

          <label>Personal message</label>
          <textarea id="message" placeholder="Add a short message (optional)"></textarea>

          <label>Denomination type</label>
          <select id="denomType">
            <option value="fixed">Fixed (single use)</option>
            <option value="multi">Multi-use / Balance</option>
          </select>

          <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
            <button class="btn" id="generateBtn">Generate & Pay</button>
            <button class="btn secondary" id="resetBtn">Reset</button>
          </div>

          <div style="margin-top:12px">
            <label class="small">E-Gift card Code</label>
            <input id="code" type="text" readonly placeholder="Generated code will appear here after payment" />
          </div>

          <div id="successMsg" class="success-msg">‚úì Code copied to clipboard!</div>
          <div id="errorMsg" class="error-msg">‚úó Please fix the errors above</div>

          <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="copyBtn">Copy Code</button>
            <button class="btn" id="downloadBtn">Download PNG</button>
            <button class="btn" id="emailBtn">Send via Email</button>
          </div>

        </section>

        <aside class="preview">
          <div style="width:100%;display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Preview</div>
              <div style="font-weight:700">Digital + Printable</div>
            </div>
            <div class="small">Website: <strong>LIKE</strong></div>
          </div>

          <div id="cardArea" class="card-mock" role="img" aria-label="Gift card preview">
            <div class="card-top">
              <div class="card-brand">
                <img id="logoPreview" src="https://turquoise-reasonable-penguin-388.mypinata.cloud/ipfs/bafkreiconcyyp3447jlcrmsmil6w3punwvyvoxqkzqh76uq22u5ms34amq" alt="LIKE logo" />
                <div>
                  <div style="font-size:14px;font-weight:700">LIKE</div>
                  <div class="muted small">Gift Card</div>
                </div>
              </div>
              <div class="card-value"><span id="currencyPreview">‚Çπ</span><span id="amountPreview">50</span></div>
            </div>
            <div style="margin-top:18px;color:rgba(255,255,255,0.9)" id="messagePreview">A special gift for you!</div>
            <div class="card-code" id="codePreview">LIKE-XXXX-XXXX</div>
          </div>

          <canvas id="exportCanvas" width="900" height="500" style="display:none"></canvas>

          <div style="width:100%;display:flex;gap:8px;justify-content:center;margin-top:8px;flex-wrap:wrap">
            <button class="btn secondary" id="saveTemplate">Save Template</button>
            <button class="btn secondary" id="loadTemplate">Load Template</button>
          </div>

          <div style="font-size:12px;color:var(--muted);margin-top:8px;text-align:center">Tip: Use the Download PNG button to save a printable image of the gift card for better convenience.</div>
        </aside>
      </div>
    </div>

    <!-- REDEEM GIFT CARD TAB -->
    <div id="redeemTab" class="tab-content">
      <div class="redeem-section">
        <header style="display:block">
          <div style="display:flex;align-items:center;gap:16px;margin-bottom:16px">
            <div class="logo"><img src="https://turquoise-reasonable-penguin-388.mypinata.cloud/ipfs/bafkreiconcyyp3447jlcrmsmil6w3punwvyvoxqkzqh76uq22u5ms34amq" alt="LIKE logo" /></div>
            <div>
              <h2>Redeem Your Gift Card</h2>
              <p class="lead">Enter your gift card code to redeem and withdraw funds to your preferred payment method.</p>
            </div>
          </div>
        </header>

        <div class="info-box">
          <h3>How to Redeem</h3>
          <p class="small">1. Enter your gift card code below<br>2. Verify the amount<br>3. Choose your withdrawal method (Bank or Crypto)<br>4. Submit your redemption request</p>
        </div>

        <div class="controls">
          <label>Gift Card Code *</label>
          <input id="redeemCode" type="text" placeholder="LIKE-XXXX-XXXX-XXXX" />

          <button class="btn full" id="verifyBtn">Verify Gift Card</button>

          <div id="redeemSuccessMsg" class="success-msg">‚úì Gift card verified!</div>
          <div id="redeemErrorMsg" class="error-msg">‚úó Invalid gift card code</div>

          <div id="redeemDetails" class="redeem-result">
            <h3 style="margin:0 0 12px 0">Gift Card Details</h3>
            <div style="display:grid;gap:8px">
              <div style="display:flex;justify-content:space-between">
                <span class="muted">Card Code:</span>
                <strong id="verifiedCode">-</strong>
              </div>
              <div style="display:flex;justify-content:space-between">
                <span class="muted">Amount:</span>
                <strong id="verifiedAmount">-</strong>
              </div>
              <div style="display:flex;justify-content:space-between">
                <span class="muted">Currency:</span>
                <strong id="verifiedCurrency">-</strong>
              </div>
              <div style="display:flex;justify-content:space-between">
                <span class="muted">Status:</span>
                <strong style="color:#00c853" id="verifiedStatus">Active</strong>
              </div>
            </div>

            <label style="margin-top:20px">Withdrawal Method *</label>
            <select id="withdrawalMethod" onchange="showPaymentOptions()">
              <option value="">-- Select Method --</option>
              <option value="bank">Bank Transfer</option>
              <option value="crypto">Cryptocurrency</option>
            </select>

            <!-- BANK TRANSFER OPTIONS -->
            <div id="bankOptions" class="payment-details">
              <label>Select Your Bank *</label>
              <select id="bankSelect">
                <option value="">-- Select Bank --</option>
              </select>

              <label>Account Holder Name *</label>
              <input id="accountName" type="text" placeholder="Full name as per bank account" />

              <label>Account Number / IBAN *</label>
              <input id="accountNumber" type="text" placeholder="Enter your account number" />

              <label>Swift/BIC Code (if international)</label>
              <input id="swiftCode" type="text" placeholder="Optional for international transfers" />
            </div>

            <!-- CRYPTO OPTIONS -->
            <div id="cryptoOptions" class="payment-details">
              <label>Crypto Network *</label>
              <select id="cryptoNetwork">
                <option value="">-- Select Network --</option>
                <option value="usdt-bep20">USDT (BEP20 - Binance Smart Chain)</option>
                <option value="usdt-trc20">USDT (TRC20 - Tron)</option>
              </select>

              <label>Wallet Address *</label>
              <input id="walletAddress" type="text" placeholder="Enter your wallet address" />

              <div style="background:rgba(255,59,48,0.1);border:1px solid rgba(255,59,48,0.3);padding:12px;border-radius:8px;margin-top:8px">
                <p class="small" style="margin:0;color:#ff3b30">‚ö†Ô∏è Warning: Double-check your wallet address. Cryptocurrency transactions are irreversible!</p>
              </div>
            </div>

            <label style="margin-top:16px">Email for Confirmation *</label>
            <input id="redeemEmail" type="email" placeholder="your@example.com" />

            <button class="btn full" id="submitRedeemBtn">Submit Redemption Request</button>
          </div>
        </div>
      </div>
    </div>

    <footer>Built with ‚ù§Ô∏è for LIKE ‚Äî We simplify your needs.</footer>
  </div>

  <!-- UPI PAYMENT MODAL -->
  <div id="paymentModal" class="payment-modal">
    <div class="payment-content">
      <button class="close-modal" onclick="closePaymentModal()">√ó</button>
      <h2 style="margin:0 0 8px 0">Complete Your Payment</h2>
      <p class="muted">Amount: <strong id="paymentAmount">‚Çπ50</strong></p>

      <div class="info-box">
        <h3>üéâ Payment Options</h3>
        <p class="small">Choose your preferred UPI payment method below</p>
      </div>

      <div class="upi-options">
        <div class="upi-btn" onclick="initiateUPIPayment('gpay')">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect width='48' height='48' rx='8' fill='%234285F4'/%3E%3Cpath d='M24 12l8 8h-5v12h-6V20h-5z' fill='white'/%3E%3Cpath d='M12 32h24v4H12z' fill='%2334A853'/%3E%3Cpath d='M12 28h24v3H12z' fill='%23FBBC04'/%3E%3Cpath d='M12 24h24v3H12z' fill='%23EA4335'/%3E%3C/svg%3E" alt="Google Pay">
          <div class="upi-btn-content">
            <h4>Google Pay</h4>
            <p>Pay using Google Pay UPI</p>
          </div>
        </div>

        <div class="upi-btn" onclick="initiateUPIPayment('phonepe')">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect width='48' height='48' rx='8' fill='%235F259F'/%3E%3Cpath d='M14 24l10-10v20z' fill='white'/%3E%3Cpath d='M24 14l10 10-10 10z' fill='%23B794F6'/%3E%3C/svg%3E" alt="PhonePe">
          <div class="upi-btn-content">
            <h4>PhonePe</h4>
            <p>Pay using PhonePe UPI</p>
          </div>
        </div>

        <div class="upi-btn" onclick="initiateUPIPayment('paytm')">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect width='48' height='48' rx='8' fill='%2300BAF2'/%3E%3Cpath d='M24 12c-6.6 0-12 5.4-12 12s5.4 12 12 12 12-5.4 12-12-5.4-12-12-12zm0 20c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z' fill='white'/%3E%3Ccircle cx='24' cy='24' r='4' fill='white'/%3E%3C/svg%3E" alt="Paytm">
          <div class="upi-btn-content">
            <h4>Paytm</h4>
            <p>Pay using Paytm UPI</p>
          </div>
        </div>

        <div class="upi-btn" onclick="initiateUPIPayment('other')">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect width='48' height='48' rx='8' fill='%23FF6B00'/%3E%3Ctext x='24' y='32' font-size='24' font-weight='bold' text-anchor='middle' fill='white'%3EUPI%3C/text%3E%3C/svg%3E" alt="Other UPI">
          <div class="upi-btn-content">
            <h4>Other UPI Apps</h4>
            <p>Scan QR or enter UPI ID</p>
          </div>
        </div>
      </div>

      <div id="qrSection" class="qr-section" style="display:none">
        <h3 style="margin:0 0 12px 0">Scan QR Code</h3>
        <div class="qr-code">
          <img id="qrCodeImg" src="" alt="UPI QR Code">
        </div>
        <div class="upi-id">
          <div class="small muted">UPI ID</div>
          <div id="upiIdDisplay" style="margin-top:4px">likegiftcards@paytm</div>
        </div>
        <button class="btn" onclick="copyUPIId()">Copy UPI ID</button>

        <div class="payment-timer">
          Time remaining: <span id="timer">5:00</span>
        </div>

        <div class="payment-instructions">
          <strong>Instructions:</strong>
          <ol>
            <li>Open any UPI app (Google Pay, PhonePe, Paytm, etc.)</li>
            <li>Scan the QR code or enter the UPI ID manually</li>
            <li>Enter the exact amount shown above</li>
            <li>Complete the payment</li>
            <li>Your gift card will be generated automatically</li>
          </ol>
        </div>

        <button class="btn full" onclick="verifyPayment()">I've Completed Payment</button>
        <button class="btn full secondary" style="margin-top:8px" onclick="closePaymentModal()">Cancel</button>
      </div>
    </div>
  </div>

<script>
// ========================================
// üîß API CONFIGURATION
// ========================================
const API_URL = 'https://like-giftcards-api.onrender.com/api';
const UPI_MERCHANT_ID = 'likegiftcards@paytm'; // Replace with your actual UPI ID

// ========================================
// HELPER FUNCTIONS
// ========================================
async function apiCall(endpoint, method = 'GET', data = null) {
  try {
    const options = {
      method,
      headers: { 'Content-Type': 'application/json' }
    };
    if (data) options.body = JSON.stringify(data);
    
    const response = await fetch(`${API_URL}${endpoint}`, options);
    const result = await response.json();
    
    if (!response.ok) {
      throw new Error(result.message || 'Request failed');
    }
    return result;
  } catch (error) {
    console.error('API Error:', error);
    throw error;
  }
}

function validateEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function switchTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  
  event.target.classList.add('active');
  document.getElementById(tab + 'Tab').classList.add('active');
}

// Bank lists
const banks = {
  'SAR': ['Saudi National Bank (SNB)', 'Al Rajhi Bank', 'Riyad Bank', 'Saudi Awwal Bank', 'Banque Saudi Fransi', 'Arab National Bank (ANB)'],
  'AED': ['First Abu Dhabi Bank (FAB)', 'Emirates NBD', 'Abu Dhabi Commercial Bank (ADCB)', 'Commercial Bank of Dubai (CBD)', 'Mashreq Bank'],
  'INR': ['State Bank of India (SBI)', 'HDFC Bank', 'ICICI Bank',
